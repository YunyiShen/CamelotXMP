# CamelotXMP

This package is part of the Van Deelen/Drake lab camera trap data management infrastructure at UW-Madison. The main goal is to write metadata from [Camelot](https://camelotproject.org/) into the [XMP metadata](https://en.wikipedia.org/wiki/Extensible_Metadata_Platform) of the photo files and vice versa. 

## Dependencies

This package used `exifr` to read/write metadata which relies on the Perl version of [exiftool](https://exiftool.org/), see the [documentation of exifr](https://www.rdocumentation.org/packages/exifr/versions/0.3.2) for how to config the required rool chain. Package `jsonlite` us also required to convert metadata in JSON format. 

## Main functions
There are 3 main functions, namely `bridge2camelot`, `camelot2xmp` and `xmp2camelot`. 

### `bridge2camelot`

Function `bridge2camelot` will convert metadata (usually generated by Adobe Bridge) stored in `xmp-dc:Subject` tag (i.e. the one appears in 'property -> tags' when opening it) by comparing it with species list and island/site list and save it into Camelot flavored data.frame, the header of such data.frame can be found in `CamelotXMP::camelotheader`. For the place that saves the tag, see [this](https://exiftool.org/TagNames/XMP.html). An error log will be written if there is any error. 

### `camelot2xmp`

Function `camelot2xmp` will read a Camelot data.frame with at least "Absolute.Path" as a column and access each file stored with path in "Absolute.Path", then write all the metadata (as JSON string) in `xmp-dc:Subject` tag of the photo. For the place to save the tag, see [this](https://exiftool.org/TagNames/XMP.html). An error log will be written if there is any error. 

### `xmp2camelot`

Function `xmp2camelot` will read a path and find all photos in it, extract the metadata in `xmp-dc:Subject` tag and write it in a Camelot flavored data.frame. An error log will be written if there is any error. 
 


